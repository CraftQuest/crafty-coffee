{% extends "_layouts/main" %}
{# Get all plans #}
{% set plans = craft.commerce.getPlans().getAllEnabledPlans() %}
{% block main %}
    <div class="full-bleed-header"
         style="background-size: 100%; height: 200px; background-image: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), url(/images/coffee-shop.jpg); background-repeat: no-repeat, repeat;">
        <div class="page-title text-center">
            <h2 class="logo"><span class="scripty">Coffee Club</h2>
        </div>
    </div>
    <div class="row">
    <div class="intro">
        <div class="large-12 small-12 columns">
            <div class="large-6 small-12 columns">
                <p>
                    {% if currentUser %}
                        <a href="{{ url('store/customer') }}"
                           class="button small radius secondary">{{ "My Orders"|t }}</a>
                        <a href="{{ url('store/customer/addresses') }}"
                           class="button small radius secondary">{{ "My Addresses"|t }}</a>
                        <a href="{{ logoutUrl }}" class="button small radius secondary">Logout</a>
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
    <div class="row">
        {% for plan in plans %}
        {% set information = plan.getInformation() ?? null %}
        {% set planData = plan.planData | json_decode %}
        <div class="small-2 large-4 columns">
            <ul class="pricing-table">
                <li class="title">{{ plan.name }}</li>
                <li class="price">{{ (planData.plan.amount / 100) | currency }}</li>
                <li class="description">{{ information.planDescription }}</li>
                {% for feature in information.planFeatures %}
                <li class="bullet-item">{{ feature.feature }}</li>
                {% endfor %}
                <li class="cta-button"><a class="button" href="{{ url('coffee-club/register?plan=' ~ plan.uid) }}">Give me the beans</a></li>
            </ul>
        </div>
        {% endfor %}
    </div>
{% endblock %}